<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
	<script src="/matrix.js"></script>
	<link href="//cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
	<title>profile</title>
	<style type="text/css">
		*{user-select: none;}
		sub{user-select: initial;}
		h2{ text-align: center;}
		canvas{position: fixed;top:0;left: 0;z-index: -1;}
	</style>
</head>
<body>
<div>
    loading...
</div>
<div class="hide">
    <h2>å“ˆå“ˆðŸ¤§</h2>
    <form>
        <div class="row">
            <div class="col-lg-offset-4 col-lg-4">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="key" required="required">
                    <span class="input-group-btn">
		        		<button class="btn btn-default" href="javascript:;" type="button">Go</button>
		      		</span>
                </div>
            </div>
        </div>
         <div class="row">
            <div class="col-lg-offset-4 col-lg-4">
                <sub></sub>
            </div>
        </div>
    </form>
</div>

</body>
<script type="text/javascript">
	$.get('profile',{key:location.pathname.replace(/^\//,'')}).done((html)=>{
		$('body').html(html);
		setTimeout(()=>{
			$('.container').fadeOut('slow');
			matrix();
		}, 1000 * 60);
	}).fail(()=>{
		$('body>div').toggleClass('hide');
		setTimeout(()=>{
			$('body>div').fadeOut('slow');
			matrix();
		}, 1000 * 60);
	}).always(()=>{
	});

	let $form = $('form');
	$form.on('keyup change','input',function(){
		$form.prop('action',`/${this.value}`);
		$('sub').html($form.prop('action'));
	}).on('submit',function(){
		location.href = $form.prop('action');
		return false;
	});
	var matrix = function(){
		var rm = new MatrixRain($('body').text().replace(/\s/g,''));
		rm.width(window.innerWidth);
		rm.height(window.innerHeight);
		rm.getElement().style.opacity = 0;
		$('body').append(rm.getElement());
		$(rm.getElement()).animate({opacity:1},1000);
		window.onresize = function(){
			rm.width(window.innerWidth);
			rm.height(window.innerHeight);
		}
	};
</script>
</html>